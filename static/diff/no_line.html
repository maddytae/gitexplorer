<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">
pre {
  font-family:Courier New;
  font-size:10pt;
}

.af_line {
  color: gray;
  text-decoration: none;
}

</style>
<title>Source file</title>
</head>
<body>
<pre>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> pandas </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> pd</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> matplotlib.pyplot </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> plt</span>
<span style="color:#a71d5d;">from</span><span style="color:#333333;"> matplotlib </span><span style="color:#a71d5d;">import</span><span style="color:#333333;"> colors </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> mcolors</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> numpy </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> np</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> streamlit </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> st</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> pandas </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> pd</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> matplotlib.pyplot </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> plt</span>
<span style="color:#a71d5d;">from</span><span style="color:#333333;"> matplotlib </span><span style="color:#a71d5d;">import</span><span style="color:#333333;"> colors </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> mcolors</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> numpy </span><span style="color:#a71d5d;">as</span><span style="color:#333333;"> np</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> os</span>
<span style="color:#a71d5d;">from</span><span style="color:#333333;"> pathlib </span><span style="color:#a71d5d;">import</span><span style="color:#333333;"> Path</span>
<span style="color:#a71d5d;">import</span><span style="color:#333333;"> settings</span>
<span style="color:#333333;">cfg</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">settings.</span><span style="color:#0086b3;">PrepareSettings</span><span style="color:#333333;">()</span>





<span style="color:#a71d5d;">class</span><span style="color:#333333;"> DataPlotter:</span>
<span style="background-color:#ffe0e0;">    def __init__(self, df):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#0086b3;background-color:#d0ffd0;">__init__</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">df</span><span style="color:#333333;background-color:#a0efa0;">, </span><span style="color:#0086b3;background-color:#a0efa0;">scn</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        </span><span style="color:#df5000;">self</span><span style="color:#333333;">.df </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> df</span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#df5000;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">.scn </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> scn</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        </span><span style="color:#df5000;">self</span><span style="color:#333333;">.quartiles </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#0086b3;">0</span><span style="color:#333333;">, </span><span style="color:#0086b3;">0.25</span><span style="color:#333333;">, </span><span style="color:#0086b3;">0.5</span><span style="color:#333333;">, </span><span style="color:#0086b3;">0.75</span><span style="color:#333333;">, </span><span style="color:#0086b3;">1</span><span style="color:#333333;">]</span>
<span style="color:#333333;">        </span><span style="color:#df5000;">self</span><span style="color:#333333;">.colors </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#183691;">&apos;white&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;steelblue&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;wheat&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;dimgrey&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;lightcoral&apos;</span><span style="color:#333333;">]</span>
<span style="color:#333333;">        </span><span style="color:#df5000;">self</span><span style="color:#333333;">.labels </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#0086b3;">None</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;First Quartile&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;Second Quartile&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;Third Quartile&apos;</span><span style="color:#333333;">, </span><span style="color:#183691;">&apos;Fourth Quartile&apos;</span><span style="color:#333333;">]</span>
<span style="color:#333333;">        </span>
<span style="color:#333333;">    </span><span style="color:#a71d5d;">def</span><span style="color:#333333;"> </span><span style="color:#795da3;">preprocess_data</span><span style="color:#333333;">(</span><span style="color:#0086b3;">self</span><span style="color:#333333;">, </span><span style="color:#0086b3;">col</span><span style="color:#333333;">):</span>
<span style="background-color:#ffe0e0;">        k = self.df[(self.df.scenario_name == </span><span style="background-color:#ffc0c0;">&apos;Supervisory Severely Adverse&apos;</span><span style="background-color:#ffe0e0;">)][[&apos;exercise_name&apos;,</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        k </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#df5000;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">.df[(</span><span style="color:#df5000;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">.df.scenario_name </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#df5000;background-color:#a0efa0;">self</span><span style="color:#333333;background-color:#a0efa0;">.scn</span><span style="color:#333333;background-color:#d0ffd0;">)][[</span><span style="color:#183691;background-color:#d0ffd0;">&apos;exercise_name&apos;</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">                                                                                       col,</span>
<span style="color:#333333;">                                                                                       </span><span style="color:#183691;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;">]].</span><span style="color:#0086b3;">reset_index</span><span style="color:#333333;">(</span><span style="color:#0086b3;">drop</span><span style="color:#a71d5d;">=</span><span style="color:#0086b3;">True</span><span style="color:#333333;">)</span>
<span style="color:#333333;">        k</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">k.</span><span style="color:#0086b3;">dropna</span><span style="color:#333333;">()</span>
<span style="color:#333333;">        </span><span style="color:#a71d5d;">return</span><span style="color:#333333;"> k</span>
<span style="color:#333333;">    </span>
<span style="background-color:#ffe0e0;">    def compute_quartiles(self, col):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#795da3;background-color:#d0ffd0;">compute_quartiles</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">col</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">bfc1</span><span style="color:#a71d5d;background-color:#a0efa0;">=</span><span style="color:#0086b3;background-color:#a0efa0;">None</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">bfc2</span><span style="color:#a71d5d;background-color:#a0efa0;">=</span><span style="color:#0086b3;background-color:#a0efa0;">None</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        k </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> </span><span style="color:#df5000;">self</span><span style="color:#333333;">.</span><span style="color:#0086b3;">preprocess_data</span><span style="color:#333333;">(col)</span>
<span style="color:#333333;">        grouped </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> k.</span><span style="color:#0086b3;">groupby</span><span style="color:#333333;">(</span><span style="color:#183691;">&apos;exercise_name&apos;</span><span style="color:#333333;">)[col]</span>
<span style="color:#333333;">        quartile_data </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> {}</span>
<span style="color:#333333;">        qv </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> {}</span>
<span style="color:#333333;background-color:#d0ffd0;">        bfc1_data </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> {}</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        bfc2_data </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> {}</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">    </span>
<span style="color:#333333;">        </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> name, group </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> grouped:</span>
<span style="color:#333333;">            quartile_values </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> group.</span><span style="color:#0086b3;">quantile</span><span style="color:#333333;">(</span><span style="color:#df5000;">self</span><span style="color:#333333;">.quartiles).values</span>
<span style="color:#333333;">            quartile_diffs </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [quartile_values[</span><span style="color:#0086b3;">0</span><span style="color:#333333;">]] </span><span style="color:#a71d5d;">+</span><span style="color:#333333;"> [quartile_values[i</span><span style="color:#a71d5d;">+</span><span style="color:#0086b3;">1</span><span style="color:#333333;">] </span><span style="color:#a71d5d;">-</span><span style="color:#333333;"> quartile_values[i] </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> i </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> </span><span style="color:#0086b3;">range</span><span style="color:#333333;">(</span><span style="color:#0086b3;">4</span><span style="color:#333333;">)]</span>
<span style="color:#333333;">            quartile_data[name] </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> quartile_diffs</span>
<span style="color:#333333;">            qv[name] </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> quartile_values</span>
<span style="background-color:#ffc0c0;">        </span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#ffe0e0;">        return quartile_data, qv </span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            group_data </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> k[k[</span><span style="color:#183691;background-color:#d0ffd0;">&apos;exercise_name&apos;</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> name]</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            bfc1_points </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> group_data[group_data[</span><span style="color:#183691;background-color:#d0ffd0;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> bfc1][col].values</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            bfc2_points </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> group_data[group_data[</span><span style="color:#183691;background-color:#d0ffd0;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> bfc2][col].values</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#a71d5d;background-color:#d0ffd0;">if</span><span style="color:#333333;background-color:#d0ffd0;"> bfc1_points.</span><span style="color:#0086b3;background-color:#d0ffd0;">any</span><span style="color:#333333;background-color:#d0ffd0;">():</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">                bfc1_data[name] </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> bfc1_points.</span><span style="color:#0086b3;background-color:#d0ffd0;">mean</span><span style="color:#333333;background-color:#d0ffd0;">()</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#a71d5d;background-color:#d0ffd0;">if</span><span style="color:#333333;background-color:#d0ffd0;"> bfc2_points.</span><span style="color:#0086b3;background-color:#d0ffd0;">any</span><span style="color:#333333;background-color:#d0ffd0;">():</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">                bfc2_data[name] </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> bfc2_points.</span><span style="color:#0086b3;background-color:#d0ffd0;">mean</span><span style="color:#333333;background-color:#d0ffd0;">()</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#d0ffd0;"># Create a DataFrame with the specified structure</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        data_dict </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> {</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;Exercise&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: </span><span style="color:#0086b3;background-color:#d0ffd0;">list</span><span style="color:#333333;background-color:#d0ffd0;">(quartile_data.</span><span style="color:#0086b3;background-color:#d0ffd0;">keys</span><span style="color:#333333;background-color:#d0ffd0;">()),</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;Min&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: [qd[</span><span style="color:#0086b3;background-color:#d0ffd0;">0</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> qd </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> qv.</span><span style="color:#0086b3;background-color:#d0ffd0;">values</span><span style="color:#333333;background-color:#d0ffd0;">()],        </span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;25th&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: [qd[</span><span style="color:#0086b3;background-color:#d0ffd0;">1</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> qd </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> qv.</span><span style="color:#0086b3;background-color:#d0ffd0;">values</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;50th&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: [qd[</span><span style="color:#0086b3;background-color:#d0ffd0;">2</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> qd </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> qv.</span><span style="color:#0086b3;background-color:#d0ffd0;">values</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;75th&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: [qd[</span><span style="color:#0086b3;background-color:#d0ffd0;">3</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> qd </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> qv.</span><span style="color:#0086b3;background-color:#d0ffd0;">values</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#183691;background-color:#d0ffd0;">&apos;Max&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: [qd[</span><span style="color:#0086b3;background-color:#d0ffd0;">4</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> qd </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> qv.</span><span style="color:#0086b3;background-color:#d0ffd0;">values</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            bfc1: [bfc1_data.</span><span style="color:#0086b3;background-color:#d0ffd0;">get</span><span style="color:#333333;background-color:#d0ffd0;">(exercise, </span><span style="color:#0086b3;background-color:#d0ffd0;">None</span><span style="color:#333333;background-color:#d0ffd0;">) </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> exercise </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> quartile_data.</span><span style="color:#0086b3;background-color:#d0ffd0;">keys</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            bfc2: [bfc2_data.</span><span style="color:#0086b3;background-color:#d0ffd0;">get</span><span style="color:#333333;background-color:#d0ffd0;">(exercise, </span><span style="color:#0086b3;background-color:#d0ffd0;">None</span><span style="color:#333333;background-color:#d0ffd0;">) </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> exercise </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> quartile_data.</span><span style="color:#0086b3;background-color:#d0ffd0;">keys</span><span style="color:#333333;background-color:#d0ffd0;">()],</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#cd0000;background-color:#000000;"> </span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        }</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        result_df </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> pd.</span><span style="color:#0086b3;background-color:#d0ffd0;">DataFrame</span><span style="color:#333333;background-color:#d0ffd0;">(data_dict)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        result_df </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> result_df.</span><span style="color:#0086b3;background-color:#d0ffd0;">set_index</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#183691;background-color:#d0ffd0;">&apos;Exercise&apos;</span><span style="color:#333333;background-color:#d0ffd0;">).</span><span style="color:#0086b3;background-color:#d0ffd0;">round</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">1</span><span style="color:#333333;background-color:#d0ffd0;">).T</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        result_df.</span><span style="color:#0086b3;background-color:#d0ffd0;">reset_index</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">inplace</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">True</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        result_df.</span><span style="color:#0086b3;background-color:#d0ffd0;">rename</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">columns</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">{</span><span style="color:#183691;background-color:#d0ffd0;">&apos;index&apos;</span><span style="color:#333333;background-color:#d0ffd0;">: </span><span style="color:#183691;background-color:#d0ffd0;">&apos;Metric&apos;</span><span style="color:#333333;background-color:#d0ffd0;">}, </span><span style="color:#0086b3;background-color:#d0ffd0;">inplace</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">True</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#a71d5d;background-color:#d0ffd0;">return</span><span style="color:#333333;background-color:#d0ffd0;"> quartile_data, qv </span><span style="color:#333333;background-color:#a0efa0;">, result_df</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#cd0000;">    </span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>

<span style="color:#333333;">    </span><span style="color:#a71d5d;">def</span><span style="color:#333333;"> </span><span style="color:#795da3;">plot_fig</span><span style="color:#333333;">(</span><span style="color:#0086b3;">self</span><span style="color:#333333;">):</span>

<span style="background-color:#ffe0e0;">        fig, ax = plt.subplots(figsize=(</span><span style="background-color:#ffc0c0;">8</span><span style="background-color:#ffe0e0;">, </span><span style="background-color:#ffc0c0;">5</span><span style="background-color:#ffe0e0;">))</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        fig, ax </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> plt.</span><span style="color:#0086b3;background-color:#d0ffd0;">subplots</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">figsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#a0efa0;">10</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#333333;background-color:#a0efa0;"> </span><span style="color:#0086b3;background-color:#a0efa0;">6</span><span style="color:#333333;background-color:#d0ffd0;">))</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#d0ffd0;"># plt.tight_layout()</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        plt.</span><span style="color:#0086b3;background-color:#d0ffd0;">xticks</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">rotation</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">45</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">ha</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&apos;right&apos;</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">fontsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">14</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        plt.</span><span style="color:#0086b3;background-color:#d0ffd0;">yticks</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">fontsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">16</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        plt.</span><span style="color:#0086b3;">tight_layout</span><span style="color:#333333;">()</span>
<span style="color:#333333;background-color:#d0ffd0;">        fig.</span><span style="color:#0086b3;background-color:#d0ffd0;">subplots_adjust</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">right</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">0.95</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        </span><span style="color:#a71d5d;">return</span><span style="color:#333333;"> fig, ax</span>

<span style="background-color:#ffe0e0;">    def plot_bar(self, col):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#795da3;background-color:#d0ffd0;">plot_bar</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">ax</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#0086b3;background-color:#d0ffd0;">col</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">        fig,ax=self.plot_fig()</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#a0efa0;"># </span><span style="color:#969896;background-color:#d0ffd0;">fig,ax=self.plot_fig()</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">        quartile_data, _ = self.compute_quartiles(col)</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        quartile_data, </span><span style="color:#df5000;background-color:#d0ffd0;">_</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#df5000;background-color:#a0efa0;">_</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#df5000;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">.</span><span style="color:#0086b3;background-color:#d0ffd0;">compute_quartiles</span><span style="color:#333333;background-color:#d0ffd0;">(col)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        exercise_names </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> </span><span style="color:#0086b3;">list</span><span style="color:#333333;">(quartile_data.</span><span style="color:#0086b3;">keys</span><span style="color:#333333;">())</span>
<span style="color:#333333;">        bottoms </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#0086b3;">0</span><span style="color:#333333;">] </span><span style="color:#a71d5d;">*</span><span style="color:#333333;"> </span><span style="color:#0086b3;">len</span><span style="color:#333333;">(exercise_names)</span>
<span style="color:#333333;">   </span>
<span style="color:#333333;">        </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> i </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> </span><span style="color:#0086b3;">range</span><span style="color:#333333;">(</span><span style="color:#0086b3;">5</span><span style="color:#333333;">):</span>
<span style="color:#333333;">            values </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [quartile_data[name][i] </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> name </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> exercise_names]</span>
<span style="color:#333333;">            </span><span style="color:#a71d5d;">if</span><span style="color:#333333;"> i </span><span style="color:#a71d5d;">&gt;</span><span style="color:#333333;"> </span><span style="color:#0086b3;">0</span><span style="color:#333333;">:</span>
<span style="color:#333333;">                bars </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> ax.</span><span style="color:#0086b3;">bar</span><span style="color:#333333;">(exercise_names, values, </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">bottom</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">bottoms, </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">facecolor</span><span style="color:#a71d5d;">=</span><span style="color:#df5000;">self</span><span style="color:#333333;">.colors[i], </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">edgecolor</span><span style="color:#a71d5d;">=</span><span style="color:#183691;">&apos;none&apos;</span><span style="color:#333333;">, </span><span style="color:#0086b3;">label</span><span style="color:#a71d5d;">=</span><span style="color:#df5000;">self</span><span style="color:#333333;">.labels[i], </span><span style="color:#0086b3;">alpha</span><span style="color:#a71d5d;">=</span><span style="color:#0086b3;">0.75</span><span style="color:#333333;">, </span><span style="color:#0086b3;">width</span><span style="color:#a71d5d;">=</span><span style="color:#0086b3;">0.4</span><span style="color:#333333;">)</span>

<span style="color:#333333;">     </span>
<span style="color:#333333;">            </span><span style="color:#a71d5d;">else</span><span style="color:#333333;">:</span>
<span style="color:#333333;">                bars </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> ax.</span><span style="color:#0086b3;">bar</span><span style="color:#333333;">(exercise_names, values, </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">bottom</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">bottoms, </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">facecolor</span><span style="color:#a71d5d;">=</span><span style="color:#183691;">&apos;none&apos;</span><span style="color:#333333;">, </span>
<span style="color:#333333;">                              </span><span style="color:#0086b3;">edgecolor</span><span style="color:#a71d5d;">=</span><span style="color:#183691;">&apos;none&apos;</span><span style="color:#333333;">, </span><span style="color:#0086b3;">label</span><span style="color:#a71d5d;">=</span><span style="color:#df5000;">self</span><span style="color:#333333;">.labels[i], </span><span style="color:#0086b3;">alpha</span><span style="color:#a71d5d;">=</span><span style="color:#0086b3;">0.75</span><span style="color:#333333;">, </span><span style="color:#0086b3;">width</span><span style="color:#a71d5d;">=</span><span style="color:#0086b3;">0.4</span><span style="color:#333333;">)</span>
<span style="color:#333333;">            bottoms </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [b </span><span style="color:#a71d5d;">+</span><span style="color:#333333;"> v </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> b, v </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> </span><span style="color:#0086b3;">zip</span><span style="color:#333333;">(bottoms, values)]</span>
<span style="background-color:#ffe0e0;">        return </span><span style="background-color:#ffc0c0;">fig,</span><span style="background-color:#ffe0e0;">ax,exercise_names</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#a71d5d;background-color:#d0ffd0;">return</span><span style="color:#333333;background-color:#d0ffd0;"> ax,exercise_names</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">    </span>
<span style="background-color:#ffe0e0;">    def add_scatter(self,col):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#795da3;background-color:#d0ffd0;">add_scatter</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">ax</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">exercise_names</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">col</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        k </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#df5000;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">.</span><span style="color:#0086b3;background-color:#d0ffd0;">preprocess_data</span><span style="color:#333333;background-color:#d0ffd0;">(col)</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">        fig,ax,exercise_names=self.plot_bar(col)</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#a0efa0;"># </span><span style="color:#969896;background-color:#d0ffd0;">fig,ax,exercise_names=self.plot_bar(col)</span><span style="background-color:#d0ffd0;"></span>

<span style="color:#333333;">        </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> name </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> exercise_names:</span>
<span style="background-color:#ffe0e0;">            group_data = </span><span style="background-color:#ffc0c0;">self.df</span><span style="background-color:#ffe0e0;">[</span><span style="background-color:#ffc0c0;">self.df</span><span style="background-color:#ffe0e0;">[&apos;exercise_name&apos;] == name]</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            group_data </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#333333;background-color:#a0efa0;">k</span><span style="color:#333333;background-color:#d0ffd0;">[</span><span style="color:#333333;background-color:#a0efa0;">k</span><span style="color:#333333;background-color:#d0ffd0;">[</span><span style="color:#183691;background-color:#d0ffd0;">&apos;exercise_name&apos;</span><span style="color:#333333;background-color:#d0ffd0;">] </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> name]</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">            data_points </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> group_data[col].values</span>
<span style="color:#333333;">            colors </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#183691;">&apos;black&apos;</span><span style="color:#333333;"> </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> legal_name </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> group_data[</span><span style="color:#183691;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;">]]</span>
<span style="color:#333333;">            sizes </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> [</span><span style="color:#0086b3;">10</span><span style="color:#333333;"> </span><span style="color:#a71d5d;">for</span><span style="color:#333333;"> legal_name </span><span style="color:#a71d5d;">in</span><span style="color:#333333;"> group_data[</span><span style="color:#183691;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;">]]</span>

<span style="background-color:#ffe0e0;">            for point, color, size in zip(data_points, colors, sizes):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            max_point </span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#0086b3;background-color:#d0ffd0;">max</span><span style="color:#333333;background-color:#d0ffd0;">(data_points)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">            </span><span style="color:#a71d5d;background-color:#d0ffd0;">for</span><span style="color:#333333;background-color:#d0ffd0;"> point, color, size</span><span style="color:#333333;background-color:#a0efa0;">, legal_name </span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#a71d5d;background-color:#d0ffd0;">in</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#0086b3;background-color:#d0ffd0;">zip</span><span style="color:#333333;background-color:#d0ffd0;">(data_points, colors, sizes</span><span style="color:#333333;background-color:#a0efa0;">, group_data[</span><span style="color:#183691;background-color:#a0efa0;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;background-color:#a0efa0;">]</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">                ax.</span><span style="color:#0086b3;">scatter</span><span style="color:#333333;">(name, point, </span><span style="color:#0086b3;">color</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">color, </span><span style="color:#0086b3;">s</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">size)</span>
<span style="background-color:#ffe0e0;">        return </span><span style="background-color:#ffc0c0;">fig,</span><span style="background-color:#ffe0e0;">ax</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">                </span><span style="color:#a71d5d;background-color:#d0ffd0;">if</span><span style="color:#333333;background-color:#d0ffd0;"> point </span><span style="color:#a71d5d;background-color:#d0ffd0;">==</span><span style="color:#333333;background-color:#d0ffd0;"> max_point:</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">                    ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">annotate</span><span style="color:#333333;background-color:#d0ffd0;">(legal_name, (name, point), </span><span style="color:#0086b3;background-color:#d0ffd0;">textcoords</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&quot;offset points&quot;</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">xytext</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">0</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">5</span><span style="color:#333333;background-color:#d0ffd0;">), </span><span style="color:#0086b3;background-color:#d0ffd0;">ha</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&apos;center&apos;</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">fontsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">10</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#cd0000;">                </span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#a71d5d;background-color:#d0ffd0;">return</span><span style="color:#333333;background-color:#d0ffd0;"> ax</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">    </span>
<span style="background-color:#ffe0e0;">    def add_line(self,col,bfc1,bfc2,bfc1_color,bfc2_color):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#795da3;background-color:#d0ffd0;">add_line</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">ax</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">col</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc1</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc2</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc1_color</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc2_color</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">        fig,ax=self.add_scatter(col)</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#a0efa0;"># </span><span style="color:#969896;background-color:#d0ffd0;">fig,ax=self.add_scatter(col)</span><span style="background-color:#d0ffd0;"></span>

<span style="color:#333333;">        k </span><span style="color:#a71d5d;">=</span><span style="color:#333333;"> </span><span style="color:#df5000;">self</span><span style="color:#333333;">.</span><span style="color:#0086b3;">preprocess_data</span><span style="color:#333333;">(col)</span>
<span style="color:#333333;">        k</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">k.</span><span style="color:#0086b3;">rename</span><span style="color:#333333;">(</span><span style="color:#0086b3;">columns</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">{col:</span><span style="color:#183691;">&apos;value&apos;</span><span style="color:#333333;">})</span>

<span style="color:#333333;">        bfc1_data</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">k[k[</span><span style="color:#183691;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;">]</span><span style="color:#a71d5d;">==</span><span style="color:#333333;">bfc1]</span>
<span style="color:#333333;">        bfc2_data</span><span style="color:#a71d5d;">=</span><span style="color:#333333;">k[k[</span><span style="color:#183691;">&apos;disclosure_legal_name&apos;</span><span style="color:#333333;">]</span><span style="color:#a71d5d;">==</span><span style="color:#333333;">bfc2]</span>
<span style="color:#333333;">    </span>
<span style="background-color:#ffe0e0;">        ax.plot(bfc1_data.exercise_name, bfc1_data.value, color=bfc1_color, linestyle=&apos;--&apos;,label=bfc1)</span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#ffe0e0;">        ax.plot(bfc2_data.exercise_name, bfc2_data.value, color=bfc2_color, linestyle=&apos;--&apos;,label=bfc2)</span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#ffe0e0;">        return </span><span style="background-color:#ffc0c0;">fig,</span><span style="background-color:#ffe0e0;"> ax</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">plot</span><span style="color:#333333;background-color:#d0ffd0;">(bfc1_data.exercise_name, bfc1_data.value, </span><span style="color:#0086b3;background-color:#d0ffd0;">color</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">bfc1_color, </span><span style="color:#0086b3;background-color:#d0ffd0;">linestyle</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&apos;--&apos;</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">label</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#a0efa0;">cfg.short_name[</span><span style="color:#333333;background-color:#d0ffd0;">bfc1</span><span style="color:#333333;background-color:#a0efa0;">]</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">plot</span><span style="color:#333333;background-color:#d0ffd0;">(bfc2_data.exercise_name, bfc2_data.value, </span><span style="color:#0086b3;background-color:#d0ffd0;">color</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">bfc2_color, </span><span style="color:#0086b3;background-color:#d0ffd0;">linestyle</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&apos;--&apos;</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">label</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#a0efa0;">cfg.short_name[</span><span style="color:#333333;background-color:#d0ffd0;">bfc2</span><span style="color:#333333;background-color:#a0efa0;">]</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#a71d5d;background-color:#d0ffd0;">return</span><span style="color:#333333;background-color:#d0ffd0;">  ax</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">    def finalize_plot(self,col,bfc1,bfc2,bfc1_color,bfc2_color):</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">    </span><span style="color:#a71d5d;background-color:#d0ffd0;">def</span><span style="color:#333333;background-color:#d0ffd0;"> </span><span style="color:#795da3;background-color:#d0ffd0;">finalize_plot</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">self</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">ax</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">col</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc1</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc2</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc1_color</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">bfc2_color</span><span style="color:#333333;background-color:#d0ffd0;">):</span><span style="background-color:#d0ffd0;"></span>

<span style="background-color:#ffe0e0;">        fig,ax=self.add_line(col,bfc1,bfc2,bfc1_color,bfc2_color)</span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#ffe0e0;">        ax.set_ylabel(col)</span><span style="background-color:#ffe0e0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#969896;background-color:#a0efa0;"># </span><span style="color:#969896;background-color:#d0ffd0;">fig,ax=self.add_line(col,bfc1,bfc2,bfc1_color,bfc2_color)</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">set_ylabel</span><span style="color:#333333;background-color:#d0ffd0;">(col</span><span style="color:#333333;background-color:#a0efa0;">,</span><span style="color:#0086b3;background-color:#a0efa0;">fontsize</span><span style="color:#a71d5d;background-color:#a0efa0;">=</span><span style="color:#0086b3;background-color:#a0efa0;">16</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;">        ax.spines[</span><span style="color:#183691;">&apos;right&apos;</span><span style="color:#333333;">].</span><span style="color:#0086b3;">set_visible</span><span style="color:#333333;">(</span><span style="color:#0086b3;">False</span><span style="color:#333333;">)</span>
<span style="color:#333333;">        ax.spines[</span><span style="color:#183691;">&apos;top&apos;</span><span style="color:#333333;">].</span><span style="color:#0086b3;">set_visible</span><span style="color:#333333;">(</span><span style="color:#0086b3;">False</span><span style="color:#333333;">)</span>
<span style="background-color:#ffe0e0;">        plt.xticks(rotation=45, ha=&apos;right&apos;, fontsize=8)</span><span style="background-color:#ffe0e0;"></span>
<span style="background-color:#ffe0e0;">        return fig,ax</span><span style="background-color:#ffe0e0;"></span>
\ No newline at end of file
<span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">legend</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">loc</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#183691;background-color:#d0ffd0;">&apos;center right&apos;</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">bbox_to_anchor</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#0086b3;background-color:#d0ffd0;">1.4</span><span style="color:#333333;background-color:#d0ffd0;">, </span><span style="color:#0086b3;background-color:#d0ffd0;">0.5</span><span style="color:#333333;background-color:#d0ffd0;">), </span><span style="color:#0086b3;background-color:#d0ffd0;">frameon</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">False</span><span style="color:#333333;background-color:#d0ffd0;">,</span><span style="color:#0086b3;background-color:#d0ffd0;">fontsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">16</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        ax.</span><span style="color:#0086b3;background-color:#d0ffd0;">set_title</span><span style="color:#333333;background-color:#d0ffd0;">(</span><span style="color:#183691;background-color:#d0ffd0;">&apos;Plot for &apos;</span><span style="color:#a71d5d;background-color:#d0ffd0;">+</span><span style="color:#333333;background-color:#d0ffd0;">col , </span><span style="color:#0086b3;background-color:#d0ffd0;">fontsize</span><span style="color:#a71d5d;background-color:#d0ffd0;">=</span><span style="color:#0086b3;background-color:#d0ffd0;">20</span><span style="color:#333333;background-color:#d0ffd0;">)</span><span style="background-color:#d0ffd0;"></span>
<span style="color:#333333;background-color:#d0ffd0;">        </span><span style="color:#a71d5d;background-color:#d0ffd0;">return</span><span style="color:#333333;background-color:#d0ffd0;"> ax</span><span style="background-color:#d0ffd0;"></span>
\ No newline at end of file
</pre>
</body>
</html>
<!--HTML generated by ansifilter 2.20, http://www.andre-simon.de/-->
